(function (b, c) {
    "function" === typeof define && define.amd ? define("notify", [], function () {
        return c(b, document)
    }) : b.Notify = c(b, document)
})(this, function (b, c) {
    function a(d, a) {
        this.title = "string" === typeof d ? d : null;
        this.options = {
            icon: "",
            body: "",
            tag: "",
            timeout: 5E3,
            notifyShow: null,
            notifyClose: null,
            notifyClick: null,
            notifyError: null,
            permissionGranted: null,
            permissionDenied: null
        };
        this.permission = null;
        if (this.isSupported()) {
            if (!this.title)throw Error("Notify(): first arg (title) must be a string.");
            if ("object" === typeof a) {
                for (var b in a)a.hasOwnProperty(b) && (this.options[b] = a[b]);
                "function" === typeof this.options.notifyShow && (this.onShowCallback = this.options.notifyShow);
                "function" === typeof this.options.notifyClose && (this.onCloseCallback = this.options.notifyClose);
                "function" === typeof this.options.notifyClick && (this.onClickCallback = this.options.notifyClick);
                "function" === typeof this.options.notifyError && (this.onErrorCallback = this.options.notifyError);
                "function" === typeof this.options.permissionGranted && (this.onPermissionGrantedCallback =
                    this.options.permissionGranted);
                "function" === typeof this.options.permissionDenied && (this.onPermissionDeniedCallback = this.options.permissionDenied)
            }
        }
    }

    a.prototype.needsPermission = function () {
        return "Notification"in b && "granted" === Notification.permission ? !1 : !0
    };
    a.prototype.requestPermission = function () {
        var a = this;
        b.Notification.requestPermission(function (b) {
            a.permission = b;
            switch (a.permission) {
                case "granted":
                    a.onPermissionGranted();
                    break;
                case "denied":
                    a.onPermissionDenied()
            }
        })
    };
    a.prototype.show = function () {
        if (this.isSupported()) {
            var a =
                this;
            this.myNotify = new Notification(this.title, {
                body: this.options.body,
                tag: this.options.tag,
                icon: this.options.icon
            });
            this.myNotify.onshow = function () {
                setTimeout(function () {
                    a.myNotify.close()
                }, a.options.timeout)
            };
            this.myNotify.addEventListener("show", this, !1);
            this.myNotify.addEventListener("error", this, !1);
            this.myNotify.addEventListener("close", this, !1);
            this.myNotify.addEventListener("click", this, !1)
        }
    };
    a.prototype.onShowNotification = function () {
        if (this.onShowCallback)this.onShowCallback()
    };
    a.prototype.onCloseNotification =
        function () {
            if (this.onCloseCallback)this.onCloseCallback();
            this.destroy()
        };
    a.prototype.onClickNotification = function () {
        if (this.onClickCallback)this.onClickCallback()
    };
    a.prototype.onErrorNotification = function () {
        if (this.onErrorCallback)this.onErrorCallback();
        this.destroy()
    };
    a.prototype.onPermissionGranted = function () {
        if (this.onPermissionGrantedCallback)this.onPermissionGrantedCallback()
    };
    a.prototype.onPermissionDenied = function () {
        if (this.onPermissionDeniedCallback)this.onPermissionDeniedCallback()
    };
    a.prototype.destroy =
        function () {
            this.myNotify.removeEventListener("show", this, !1);
            this.myNotify.removeEventListener("error", this, !1);
            this.myNotify.removeEventListener("close", this, !1);
            this.myNotify.removeEventListener("click", this, !1)
        };
    a.prototype.isSupported = function () {
        return "Notification"in b ? !0 : !1
    };
    a.prototype.handleEvent = function (a) {
        switch (a.type) {
            case "show":
                this.onShowNotification(a);
                break;
            case "close":
                this.onCloseNotification(a);
                break;
            case "click":
                this.onClickNotification(a);
                break;
            case "error":
                this.onErrorNotification(a)
        }
    };
    return a
});